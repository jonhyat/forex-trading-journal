import{r as x,j as e}from"./index-1309c373.js";import{P as B,C as h}from"./PageContainer-2bf3b3cb.js";import{G as i}from"./Grid-e73f40b8.js";import{C as m}from"./CardContent-9eb0aa4c.js";import{T as a,B as c}from"./Box-33fec5ab.js";import{B as u}from"./Button-19b134a1.js";import{I as b,a as z,D as L,b as A,c as M,d as N,e as U}from"./IconPlus-a8b6400f.js";import{I as T}from"./IconButton-6a007cae.js";import{I as O,a as G}from"./IconTrash-07020737.js";import{C as H}from"./Chip-58593fe9.js";import{T as d,F as _,I as $}from"./TextField-8638aa2c.js";import{S as q}from"./Select-f3f60d59.js";import{M as w}from"./createReactComponent-07a18c14.js";import"./Paper-27ed3d65.js";import"./useTheme-1e2745ba.js";import"./ButtonBase-007bba17.js";import"./Menu-859d893a.js";const de=()=>{const[l,p]=x.useState([]),[I,j]=x.useState(!1),[S,v]=x.useState(null),[g,f]=x.useState(!1),[r,n]=x.useState({image:"",pair:"",entry:"",exit:"",profit:"",notes:"",date:new Date().toISOString().split("T")[0],type:"long"}),D=t=>{const s=t.target.files[0];if(s){const o=new FileReader;o.onloadend=()=>{n({...r,image:o.result})},o.readAsDataURL(s)}},W=()=>{p(g?l.map((t,s)=>s===S?r:t):[...l,r]),y()},F=t=>{v(t),n(l[t]),f(!0),j(!0)},P=t=>{p(l.filter((s,o)=>o!==t))},y=()=>{j(!1),f(!1),v(null),n({image:"",pair:"",entry:"",exit:"",profit:"",notes:"",date:new Date().toISOString().split("T")[0],type:"long"})},E=()=>{f(!1),j(!0)},C=l.reduce((t,s)=>{const o=parseFloat(s.profit)||0;return t+o},0),k=l.filter(t=>parseFloat(t.profit)>0).length,R=l.length>0?k/l.length*100:0;return e.jsxs(B,{title:"Weekly Trade Review",description:"Review and analyze your weekly trading performance",children:[e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,md:4,children:e.jsx(h,{sx:{bgcolor:"primary.light",color:"white"},children:e.jsxs(m,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Total Trades"}),e.jsx(a,{variant:"h3",children:l.length})]})})}),e.jsx(i,{item:!0,xs:12,md:4,children:e.jsx(h,{sx:{bgcolor:C>=0?"success.light":"error.light",color:"white"},children:e.jsxs(m,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Total Profit/Loss"}),e.jsx(a,{variant:"h3",children:C.toFixed(2)})]})})}),e.jsx(i,{item:!0,xs:12,md:4,children:e.jsx(h,{sx:{bgcolor:"info.light",color:"white"},children:e.jsxs(m,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Win Rate"}),e.jsxs(a,{variant:"h3",children:[R.toFixed(1),"%"]})]})})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(c,{display:"flex",justifyContent:"flex-end",mb:2,children:e.jsx(u,{variant:"contained",color:"primary",startIcon:e.jsx(b,{}),onClick:E,children:"Add New Trade"})})}),l.map((t,s)=>e.jsx(i,{item:!0,xs:12,md:6,lg:4,children:e.jsx(h,{children:e.jsxs(m,{children:[e.jsxs(c,{position:"relative",children:[e.jsx("img",{src:t.image,alt:`Trade ${s+1}`,style:{width:"100%",height:"200px",objectFit:"cover"}}),e.jsxs(c,{position:"absolute",top:8,right:8,display:"flex",gap:1,children:[e.jsx(T,{size:"small",onClick:()=>F(s),sx:{bgcolor:"white"},children:e.jsx(O,{size:18})}),e.jsx(T,{size:"small",onClick:()=>P(s),sx:{bgcolor:"white"},children:e.jsx(G,{size:18})})]})]}),e.jsxs(c,{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,children:[e.jsx(a,{variant:"h6",children:t.pair}),e.jsx(H,{label:t.type.toUpperCase(),color:t.type==="long"?"success":"error",size:"small"})]}),e.jsxs(c,{display:"flex",alignItems:"center",mt:1,mb:1,children:[e.jsx(z,{size:16,style:{marginRight:"8px"}}),e.jsx(a,{variant:"body2",color:"textSecondary",children:new Date(t.date).toLocaleDateString()})]}),e.jsx(L,{sx:{my:1}}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:6,children:e.jsxs(a,{variant:"body2",color:"textSecondary",children:["Entry: ",t.entry]})}),e.jsx(i,{item:!0,xs:6,children:e.jsxs(a,{variant:"body2",color:"textSecondary",children:["Exit: ",t.exit]})})]}),e.jsxs(a,{variant:"h6",color:parseFloat(t.profit)>=0?"success.main":"error.main",fontWeight:"bold",mt:1,children:["Profit: ",t.profit]}),e.jsx(a,{variant:"body2",mt:1,children:t.notes})]})})},s))]}),e.jsxs(A,{open:I,onClose:y,maxWidth:"md",fullWidth:!0,children:[e.jsx(M,{children:g?"Edit Trade":"Add New Trade"}),e.jsx(N,{children:e.jsxs(c,{display:"flex",flexDirection:"column",gap:2,mt:2,children:[e.jsxs(u,{variant:"outlined",component:"label",startIcon:e.jsx(b,{}),children:["Upload Trade Screenshot",e.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:D})]}),r.image&&e.jsx("img",{src:r.image,alt:"Trade preview",style:{maxHeight:"200px",objectFit:"contain"}}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(d,{label:"Currency Pair",value:r.pair,onChange:t=>n({...r,pair:t.target.value}),fullWidth:!0})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(_,{fullWidth:!0,children:[e.jsx($,{children:"Trade Type"}),e.jsxs(q,{value:r.type,label:"Trade Type",onChange:t=>n({...r,type:t.target.value}),children:[e.jsx(w,{value:"long",children:"Long"}),e.jsx(w,{value:"short",children:"Short"})]})]})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(d,{label:"Date",type:"date",value:r.date,onChange:t=>n({...r,date:t.target.value}),fullWidth:!0,InputLabelProps:{shrink:!0}})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(d,{label:"Entry Price",value:r.entry,onChange:t=>n({...r,entry:t.target.value}),fullWidth:!0})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(d,{label:"Exit Price",value:r.exit,onChange:t=>n({...r,exit:t.target.value}),fullWidth:!0})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(d,{label:"Profit/Loss",value:r.profit,onChange:t=>n({...r,profit:t.target.value}),fullWidth:!0})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(d,{label:"Notes",value:r.notes,onChange:t=>n({...r,notes:t.target.value}),multiline:!0,rows:4,fullWidth:!0})})]})]})}),e.jsxs(U,{children:[e.jsx(u,{onClick:y,children:"Cancel"}),e.jsx(u,{onClick:W,variant:"contained",color:"primary",children:g?"Save Changes":"Add Trade"})]})]})]})};export{de as default};
