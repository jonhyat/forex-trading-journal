import{r as u,j as e}from"./index-1309c373.js";import{P as M,C as d}from"./PageContainer-2bf3b3cb.js";import{G as i}from"./Grid-e73f40b8.js";import{C as c}from"./CardContent-9eb0aa4c.js";import{T as n,B as h}from"./Box-33fec5ab.js";import{B as j}from"./Button-19b134a1.js";import{I as T,a as O,D as G,b as H,c as Y,d as _,e as $}from"./IconPlus-a8b6400f.js";import{I as S}from"./IconButton-6a007cae.js";import{I as q,a as J}from"./IconTrash-07020737.js";import{C as w}from"./Chip-58593fe9.js";import{I as K}from"./IconClock-190b279c.js";import{T as x,F as I,I as D}from"./TextField-8638aa2c.js";import{S as P}from"./Select-f3f60d59.js";import{M as m}from"./createReactComponent-07a18c14.js";import"./Paper-27ed3d65.js";import"./useTheme-1e2745ba.js";import"./ButtonBase-007bba17.js";import"./Menu-859d893a.js";const ue=()=>{const[l,p]=u.useState([]),[F,g]=u.useState(!1),[L,C]=u.useState(null),[f,y]=u.useState(!1),[r,a]=u.useState({image:"",pair:"",entry:"",exit:"",profit:"",notes:"",date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}),type:"long",session:"london"}),W=t=>{const s=t.target.files[0];if(s){const o=new FileReader;o.onloadend=()=>{a({...r,image:o.result})},o.readAsDataURL(s)}},k=()=>{p(f?l.map((t,s)=>s===L?r:t):[...l,r]),v()},z=t=>{C(t),a(l[t]),y(!0),g(!0)},B=t=>{p(l.filter((s,o)=>o!==t))},v=()=>{g(!1),y(!1),C(null),a({image:"",pair:"",entry:"",exit:"",profit:"",notes:"",date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}),type:"long",session:"london"})},E=()=>{y(!1),g(!0)},b=l.reduce((t,s)=>{const o=parseFloat(s.profit)||0;return t+o},0),R=l.filter(t=>parseFloat(t.profit)>0).length,A=l.length>0?R/l.length*100:0,U=l.length>0?b/l.length:0,N=l.reduce((t,s)=>(t[s.session]||(t[s.session]={count:0,profit:0}),t[s.session].count++,t[s.session].profit+=parseFloat(s.profit)||0,t),{});return e.jsxs(M,{title:"Daily Trade Review",description:"Review and analyze your daily trading performance",children:[e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,md:3,children:e.jsx(d,{sx:{bgcolor:"primary.light",color:"white"},children:e.jsxs(c,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Today's Trades"}),e.jsx(n,{variant:"h3",children:l.length})]})})}),e.jsx(i,{item:!0,xs:12,md:3,children:e.jsx(d,{sx:{bgcolor:b>=0?"success.light":"error.light",color:"white"},children:e.jsxs(c,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Daily P/L"}),e.jsx(n,{variant:"h3",children:b.toFixed(2)})]})})}),e.jsx(i,{item:!0,xs:12,md:3,children:e.jsx(d,{sx:{bgcolor:"info.light",color:"white"},children:e.jsxs(c,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Win Rate"}),e.jsxs(n,{variant:"h3",children:[A.toFixed(1),"%"]})]})})}),e.jsx(i,{item:!0,xs:12,md:3,children:e.jsx(d,{sx:{bgcolor:"warning.light",color:"white"},children:e.jsxs(c,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Avg Profit/Trade"}),e.jsx(n,{variant:"h3",children:U.toFixed(2)})]})})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(d,{children:e.jsxs(c,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Session Performance"}),e.jsx(i,{container:!0,spacing:2,children:Object.entries(N).map(([t,s])=>e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsx(d,{variant:"outlined",children:e.jsxs(c,{children:[e.jsxs(n,{variant:"subtitle1",sx:{textTransform:"capitalize"},children:[t," Session"]}),e.jsxs(n,{variant:"body2",children:["Trades: ",s.count]}),e.jsxs(n,{variant:"body2",color:s.profit>=0?"success.main":"error.main",children:["P/L: ",s.profit.toFixed(2)]})]})})},t))})]})})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(h,{display:"flex",justifyContent:"flex-end",mb:2,children:e.jsx(j,{variant:"contained",color:"primary",startIcon:e.jsx(T,{}),onClick:E,children:"Add New Trade"})})}),l.map((t,s)=>e.jsx(i,{item:!0,xs:12,md:6,lg:4,children:e.jsx(d,{children:e.jsxs(c,{children:[e.jsxs(h,{position:"relative",children:[e.jsx("img",{src:t.image,alt:`Trade ${s+1}`,style:{width:"100%",height:"200px",objectFit:"cover"}}),e.jsxs(h,{position:"absolute",top:8,right:8,display:"flex",gap:1,children:[e.jsx(S,{size:"small",onClick:()=>z(s),sx:{bgcolor:"white"},children:e.jsx(q,{size:18})}),e.jsx(S,{size:"small",onClick:()=>B(s),sx:{bgcolor:"white"},children:e.jsx(J,{size:18})})]})]}),e.jsxs(h,{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,children:[e.jsx(n,{variant:"h6",children:t.pair}),e.jsx(w,{label:t.type.toUpperCase(),color:t.type==="long"?"success":"error",size:"small"})]}),e.jsxs(h,{display:"flex",alignItems:"center",mt:1,mb:1,children:[e.jsx(O,{size:16,style:{marginRight:"8px"}}),e.jsx(n,{variant:"body2",color:"textSecondary",children:new Date(t.date).toLocaleDateString()}),e.jsx(K,{size:16,style:{marginLeft:"16px",marginRight:"8px"}}),e.jsx(n,{variant:"body2",color:"textSecondary",children:t.time})]}),e.jsx(w,{label:t.session.toUpperCase(),size:"small",sx:{mb:1}}),e.jsx(G,{sx:{my:1}}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:6,children:e.jsxs(n,{variant:"body2",color:"textSecondary",children:["Entry: ",t.entry]})}),e.jsx(i,{item:!0,xs:6,children:e.jsxs(n,{variant:"body2",color:"textSecondary",children:["Exit: ",t.exit]})})]}),e.jsxs(n,{variant:"h6",color:parseFloat(t.profit)>=0?"success.main":"error.main",fontWeight:"bold",mt:1,children:["Profit: ",t.profit]}),e.jsx(n,{variant:"body2",mt:1,children:t.notes})]})})},s))]}),e.jsxs(H,{open:F,onClose:v,maxWidth:"md",fullWidth:!0,children:[e.jsx(Y,{children:f?"Edit Trade":"Add New Trade"}),e.jsx(_,{children:e.jsxs(h,{display:"flex",flexDirection:"column",gap:2,mt:2,children:[e.jsxs(j,{variant:"outlined",component:"label",startIcon:e.jsx(T,{}),children:["Upload Trade Screenshot",e.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:W})]}),r.image&&e.jsx("img",{src:r.image,alt:"Trade preview",style:{maxHeight:"200px",objectFit:"contain"}}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(x,{label:"Currency Pair",value:r.pair,onChange:t=>a({...r,pair:t.target.value}),fullWidth:!0})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(I,{fullWidth:!0,children:[e.jsx(D,{children:"Trade Type"}),e.jsxs(P,{value:r.type,label:"Trade Type",onChange:t=>a({...r,type:t.target.value}),children:[e.jsx(m,{value:"long",children:"Long"}),e.jsx(m,{value:"short",children:"Short"})]})]})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(x,{label:"Date",type:"date",value:r.date,onChange:t=>a({...r,date:t.target.value}),fullWidth:!0,InputLabelProps:{shrink:!0}})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(x,{label:"Time",type:"time",value:r.time,onChange:t=>a({...r,time:t.target.value}),fullWidth:!0,InputLabelProps:{shrink:!0}})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(I,{fullWidth:!0,children:[e.jsx(D,{children:"Trading Session"}),e.jsxs(P,{value:r.session,label:"Trading Session",onChange:t=>a({...r,session:t.target.value}),children:[e.jsx(m,{value:"london",children:"London"}),e.jsx(m,{value:"newyork",children:"New York"}),e.jsx(m,{value:"tokyo",children:"Tokyo"}),e.jsx(m,{value:"sydney",children:"Sydney"})]})]})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(x,{label:"Entry Price",value:r.entry,onChange:t=>a({...r,entry:t.target.value}),fullWidth:!0})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(x,{label:"Exit Price",value:r.exit,onChange:t=>a({...r,exit:t.target.value}),fullWidth:!0})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(x,{label:"Profit/Loss",value:r.profit,onChange:t=>a({...r,profit:t.target.value}),fullWidth:!0})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(x,{label:"Notes",value:r.notes,onChange:t=>a({...r,notes:t.target.value}),multiline:!0,rows:4,fullWidth:!0})})]})]})}),e.jsxs($,{children:[e.jsx(j,{onClick:v,children:"Cancel"}),e.jsx(j,{onClick:k,variant:"contained",color:"primary",children:f?"Save Changes":"Add Trade"})]})]})]})};export{ue as default};
